{"version":3,"sources":["context/getWeb3.js","context/index.js","context/Web3Provider.js","context/useContract/writeContract.js","context/useContract/readContract.js","context/useContract/index.js","ui/components/Header.js","ui/components/Footer.js","ui/components/Winner.js","ui/components/Table.js","ui/components/Row.js","ui/components/Spinner.js","ui/VotersList.js","ui/ProposalList.js","App.js","index.js"],"names":["getWeb3","Promise","resolve","reject","window","addEventListener","a","ethereum","web3","Web3","enable","console","log","provider","providers","HttpProvider","Web3Context","createContext","withContext","Component","props","Consumer","value","Provider","Web3Provider","children","useState","accounts","contract","admin","endVoting","state","setState","connectWeb3","connectBlockchain","eth","getAccounts","net","getId","networkId","deployedNetwork","VotingContract","networks","instance","Contract","abi","address","methods","status","call","connect","then","error","useMemo","WriteContract","currentVoter","setCurrentVoter","addVoter","send","from","removeVoter","deleteVoter","addProposal","content","removeProposal","deleteProposal","vote","id","startProposalSession","startProposalRegistration","endProposalSession","endProposalRegistration","startVotingSession","endVotingSession","resetVotingSession","ReadContract","count","setCount","whiteList","getVoters","voters","all","map","isRegistered","_address","hasVoted","isWhitelisted","values","filter","getProposals","propals","proposalIds","proposalCount","i","proposals","proposal","description","length","push","getWinningProposal","sort","b","voteCount","countVoters","votersCount","useContract","TRANSACTION_STATUS","NIL","PENDING","COMPLETED","event","transactionStatus","setTransactionStatus","setEvent","visible","message","toast","setToast","setStatus","eventTxHash","setTxHash","getStatus","index","displayToast","setTimeout","handleTransaction","data","getTransactionReceipt","transactionHash","result","subscribeEvents","events","allEvents","returnValues","newStatus","document","location","reload","registerEvent","useEffect","isPending","isProposalsRegistrationOpen","Boolean","parseInt","isDisabled","className","onClick","disabled","options","winningProposal","setWinningProposal","owner","styles","header","display","width","table","height","overflow","Table","isLoading","style","scope","button","VotesCount","votesCount","color","Row","remove","isProposal","useContext","hasVotes","marginRight","marginLeft","Spinner","opacity","role","VotersList","setVoters","voterAddress","setVoterAddress","isVoterRegistrationOpen","hasErrors","onSubmit","e","preventDefault","type","aria-describedby","onChange","target","key","ProposalList","setProposal","proposalsList","setProposalList","Toast","visibility","zIndex","aria-live","aria-atomic","data-bs-dismiss","aria-label","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.566647b4.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        const provider = new Web3.providers.HttpProvider(\n          \"http://127.0.0.1:7545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n    });\n  });\n\nexport default getWeb3;\n","import React, { createContext } from 'react';\n\nexport const Web3Context = createContext();\n\nconst withContext = Component => props => {\n    return <Web3Context.Consumer>{value => <Component {...value} {...props} />}</Web3Context.Consumer>\n}\nexport default withContext","import React, { useMemo, useState } from \"react\";\nimport VotingContract from \"../contracts/Voting.json\";\nimport getWeb3 from \"./getWeb3\";\nimport { Web3Context } from \".\";\n\nconst { Provider } = Web3Context;\n\nconst Web3Provider = ({ children }) => {\n  const [state, setState] = useState({\n    web3: null,\n    accounts: null,\n    contract: null,\n    admin: null,\n    endVoting: false,\n  });\n\n  const connectWeb3 = new Promise(async (resolve) => {\n    const web3 = await getWeb3();\n    resolve(web3);\n  });\n\n  const connectBlockchain = (web3) =>\n    new Promise(async (resolve) => {\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = VotingContract.networks[networkId];\n\n      const instance = new web3.eth.Contract(\n        VotingContract.abi,\n        deployedNetwork && deployedNetwork.address\n      );\n      instance && console.log(\"connected to blockchain\");\n      const status = await instance.methods.status().call() == 4;\n      console.log('session ended :', status);\n      resolve({ web3, instance, accounts, status });\n    });\n\n  const connect = () => {\n    connectWeb3\n      .then(connectBlockchain, console.error)\n      .then(({ web3, instance, accounts, status }) => {\n        setState({ web3, accounts, contract: instance, admin: accounts[0], endVoting: status });\n      });\n  };\n\n  const value = useMemo(() => {\n    return {\n      connectWeb3: connect,\n      instance: state.contract,\n      ...state,\n    };\n  }, [state]);\n  return <Provider value={value}>{children}</Provider>;\n};\nexport default Web3Provider;\n","import { useState } from \"react\";\n\nconst WriteContract = (instance, admin) => {\n  const [currentVoter, setCurrentVoter] = useState(null);\n\n  const addVoter = async (address) => {\n    setCurrentVoter(address);\n    await instance.methods.addVoter(address).send({ from: admin });\n  };\n  const removeVoter = async (address) => {\n    setCurrentVoter(address);\n    await instance.methods.deleteVoter(address).send({ from: admin });\n  };\n  const addProposal = async (content) => {\n    await instance.methods.addProposal(content).send({ from: admin });\n  };\n  const removeProposal = async (content) => {\n    await instance.methods.deleteProposal(content).send({ from: admin });\n  };\n  const vote = async (id) => {\n    await instance.methods.vote(id).send({ from: admin });\n  };\n  const startProposalSession = async () => {\n    await instance.methods.startProposalRegistration().send({ from: admin });\n  };\n  const endProposalSession = async () => {\n    await instance.methods.endProposalRegistration().send({ from: admin });\n  };\n  const startVotingSession = async () => {\n    await instance.methods.startVotingSession().send({ from: admin });\n  };\n  const endVotingSession = async () => {\n    await instance.methods.endVotingSession().send({ from: admin });\n  };\n  const resetVotingSession = async () => {\n    await instance.methods.resetVotingSession().send({ from: admin });\n  };\n\n  return {\n    currentVoter,\n    addVoter,\n    removeVoter,\n    startProposalSession,\n    endProposalSession,\n    startVotingSession,\n    endVotingSession,\n    resetVotingSession,\n    addProposal,\n    removeProposal,\n    vote,\n  };\n};\nexport default WriteContract;\n","import { useState } from \"react\";\n\nconst ReadContract = (instance) => {\n  const [count, setCount] = useState(0);\n\n  const countVoters = () => {\n    if (!instance) {\n      return false;\n    }\n    instance.methods.votersCount().call().then(setCount);\n  };\n\n  const whiteList = async (instance) => {\n    if (!instance) {\n      return false;\n    }\n    const voters = await instance.methods.getVoters().call();\n    return await Promise.all(\n      voters.map(async (address) => {\n        const {\n          isRegistered,\n          _address,\n          hasVoted,\n        } = await instance.methods.whiteList(address).call();\n\n        return {\n          address: _address,\n          isWhitelisted: isRegistered,\n          hasVoted: hasVoted,\n        };\n      })\n    ).then((values) => values.filter((value) => value.isWhitelisted));\n  };\n\n  const getProposals = async (instance) => {\n    if (!instance) {\n      return false;\n    }\n    let propals = [];\n    const proposalCount = await instance.methods.proposalIds().call();\n    return new Promise(async (resolve) => {\n      for (let i = 0; i <= proposalCount; i++) {\n        const proposal = await instance.methods.proposals(i).call();\n        if (!!proposal.description.length) {\n          propals.push(proposal);\n        }\n      }\n      resolve(propals);\n    }).then((values) => values);\n  };\n\n  const getWinningProposal = async (instance) => {\n    const proposals = await getProposals(instance);\n    proposals.sort((a,b) => b.voteCount - a.voteCount)\n    return proposals[0];\n  }\n\n  return {\n    count,\n    whiteList,\n    getProposals,\n    countVoters,\n    getProposals,\n    getWinningProposal,\n  };\n};\nexport default ReadContract;\n","import { useState, useEffect, useMemo } from \"react\";\nimport Web3 from \"web3\";\nimport WriteContract from \"./writeContract\";\nimport ReadContract from \"./readContract\";\n\nconst useContract = (instance, admin) => {\n  const TRANSACTION_STATUS = {\n    NIL: \"null\",\n    PENDING: \"pending\",\n    COMPLETED: \"completed\",\n  };\n  const {\n    state,\n    currentVoter,\n    addVoter,\n    removeVoter,\n    startProposalSession,\n    endProposalSession,\n    startVotingSession,\n    endVotingSession,\n    resetVotingSession,\n    addProposal,\n    removeProposal,\n    vote,\n  } = WriteContract(instance, admin);\n\n  const { count, whiteList, getProposals, countVoters, getWinningProposal } = ReadContract(\n    instance\n  );\n  const [transactionStatus, setTransactionStatus] = useState({\n    status: TRANSACTION_STATUS.NIL,\n    event: null,\n  });\n\n  const [event, setEvent] = useState(null);\n  const [toast, setToast] = useState({ visible: false, message: \"\" });\n  const [status, setStatus] = useState(0);\n  const [eventTxHash, setTxHash] = useState(\"\");\n\n  const getStatus = async () => {\n    if (!instance) {\n      return false;\n    }\n    instance.methods\n      .status()\n      .call()\n      .then(([index]) => setStatus(index))\n\n  };\n\n  const updateStatus = (data) => setStatus(data.returnValues.newStatus);\n  \n  const registerEvent = (data) => {\n    setTxHash(data.transactionHash);\n    setEvent(data.event);\n  };\n\n  const displayToast = (message) => {\n    setToast({ visible: true, message: message });\n    setTimeout(() => setToast({ visible: false, message: \"\" }), 2000);\n  };\n\n  const handleTransaction = async (data, message) => {\n    return new Promise((resolve) => {\n      setTransactionStatus({\n        status: TRANSACTION_STATUS.PENDING,\n        event: data.event,\n      });\n      const web3 = new Web3(window.ethereum);\n      web3.eth.getTransactionReceipt(data.transactionHash).then((result) => {\n        setTimeout(() => {\n          setTransactionStatus({\n            status: result.status\n              ? TRANSACTION_STATUS.COMPLETED\n              : TRANSACTION_STATUS.NIL,\n            event: data.event,\n          });\n          countVoters();\n          if (data.event !== \"WorkflowStatusChange\") {\n            displayToast(message);\n          }\n        }, 5000);\n        resolve(data);\n      });\n    });\n  };\n\n  const subscribeEvents = () => {\n    if (!instance) {\n      return false;\n    }\n    instance.events.allEvents( {\n      },(error,event)=> {\n        if(error) {\n          throw error\n        }\n        handleTransaction(event, `✅ ${event.event} !`)\n        if(event.event == \"WorkflowStatusChange\"){\n          updateStatus(event);\n        } else if(event.event == \"VotingSessionEnded\"){\n          document.location.reload()\n        } else {\n          registerEvent(event);\n        }\n      })\n  };\n\n  useEffect(() => {\n    subscribeEvents();\n    getStatus();\n    countVoters();\n  }, [instance]);\n\n  return useMemo(() => {\n    return {\n      TRANSACTION_STATUS,\n      transactionStatus,\n      status,\n      count,\n      eventTxHash,\n      toast,\n      whiteList,\n      getProposals,\n      getWinningProposal,\n      addVoter,\n      removeVoter,\n      startProposalSession,\n      endProposalSession,\n      startVotingSession,\n      endVotingSession,\n      resetVotingSession,\n      addProposal,\n      removeProposal,\n      vote,\n    };\n  }, [status, event, transactionStatus, count, eventTxHash, state, toast]);\n};\nexport default useContract;\n","import React, { useMemo } from \"react\";\nimport withContext from \"../../context\";\nimport useContract from \"../../context/useContract\";\n\nconst Header = ({ instance, admin, endVoting }) => {\n  const {\n    transactionStatus, \n    TRANSACTION_STATUS,\n        eventTxHash,\n    count,\n    status,\n    event,\n    startProposalSession,\n    endProposalSession,\n    startVotingSession,\n    endVotingSession,\n    resetVotingSession,\n  } = useContract(instance, admin);\n  const workflowStatus = [\n    \"RegisteringVoters\",\n    \"ProposalsRegistrationStarted\",\n    \"ProposalsRegistrationEnded\",\n    \"VotingSessionStarted\",\n    \"VotingSessionEnded\",\n    \"VotesTallied\",\n  ];\n\n\nconst isPending = useMemo(() => transactionStatus.status === TRANSACTION_STATUS.PENDING,[eventTxHash, transactionStatus]);\nconst isProposalsRegistrationOpen = useMemo(\n    () => !Boolean(!isPending && count > 0 && parseInt(status) === 0),\n    [count, status, event]\n  );\n\n  const isDisabled = (index) => !Boolean(!isPending && parseInt(status) === index);\n\n\n  return (\n    !!instance && (\n      <nav className=\"navbar navbar-light bg-light\">\n        <div className=\"container-fluid\">\n          <div className=\"d-flex\">\n            <button\n              onClick={startProposalSession}\n              className=\"btn btn-secondary btn-sm\"\n              disabled={isProposalsRegistrationOpen}\n            >\n              Start Proposals Session\n            </button>\n            &nbsp;\n            <button\n              onClick={endProposalSession}\n              disabled={isDisabled(1)}\n              className=\"btn btn-secondary btn-sm\"\n            >\n              End Proposals Session\n            </button>\n            &nbsp;\n            <button\n              onClick={startVotingSession}\n              className=\"btn btn-secondary btn-sm\"\n              disabled={isDisabled(2)}\n            >\n              Start Voting Session\n            </button>\n            &nbsp;\n            <button\n              onClick={endVotingSession}\n              disabled={isDisabled(3)}\n              className=\"btn btn-secondary btn-sm\"\n            >\n              End Voting Session\n            </button>\n            &nbsp;\n           {/*  <button\n              onClick={resetVotingSession}\n              disabled={!Boolean(parseInt(status) !== 0)}\n              className=\"btn btn-danger btn-sm\"\n            >\n              Reset\n            </button> */}\n          </div>\n          <span className=\"navbar-brand mb-0 h1\">\n            status : {workflowStatus[status]}\n          </span>\n        </div>\n      </nav>\n    )\n  );\n};\nexport default withContext(Header);\n","import React from \"react\";\nimport withContext from \"../../context\";\n\nconst Footer = ({ instance }) => {\n  return (\n    !!instance && (\n      <nav className=\"navbar navbar-light bg-light fixed-bottom\">\n        <div className=\"container-fluid float-end\">\n          <p></p>\n          <p>\n            <strong>contract's address</strong> : {instance.options.address}\n          </p>\n        </div>\n      </nav>\n    )\n  );\n};\nexport default withContext(Footer);\n","import React, {useState, useEffect} from \"react\";\nimport withContext from \"../../context\";\nimport useContract from \"../../context/useContract\";\n\nconst Winner = ({ instance, admin }) => {\n  const [winningProposal, setWinningProposal] = useState(null);\n\n  const {\n    getWinningProposal,\n  } = useContract(instance, admin)\n \n  useEffect(() => {\n    getWinningProposal(instance).then(setWinningProposal);\n  }, [instance]);\n\n  return (\n    !!instance && (\n       <div className=\"container\">\n    \n      {winningProposal \n        ?  (\n        <div className=\"row align-items-center border-bottom\">\n          <h2 className=\"alert alert-danger\">Session de vote terminée</h2>\n          <p className=\"text-center\">La proposition <strong>{winningProposal.description}</strong> de <span>{winningProposal.owner} </span> remporte le vote !</p>\n          <p className=\"text-center\"> Avec <b>{winningProposal.voteCount}</b> votes !</p>\n        </div>)\n        : null\n      }\n    \n    </div>\n    )\n  );\n};\nexport default withContext(Winner);\n","import React from \"react\";\n\nconst styles = {\n  header: { display: \"inherit\", width: \"95%\" },\n  table: {\n    display: \"block\",\n    height: \"400px\",\n    overflow: \"scroll\",\n    width: \"95%\",\n  },\n};\nconst Table = ({ header, children, isLoading }) => {\n  return (\n    !isLoading && (\n      <table className=\"table\">\n        <thead style={styles.header}>\n          <tr>\n            <th scope=\"col\">#</th>\n            <th scope=\"col\">{header}</th>\n            <th scope=\"col\">Select</th>\n          </tr>\n        </thead>\n        <tbody style={styles.table}>{children}</tbody>\n      </table>\n    )\n  );\n};\nexport default Table;\n","import React, { useContext, useMemo } from \"react\";\nimport { Web3Context } from \"../../context\";\nimport useContract from \"../../context/useContract\";\n\nconst styles = {\n  button: {\n    width: 100,\n  },\n};\n\nconst VotesCount = ({ votesCount }) => {\n  return (\n    votesCount > 0 && (\n      <span>\n        {votesCount <= 1 ? (\n          <>\n            <i className=\"fas fa-check\" style={{ color: \"#27ae60\" }}></i>{\" \"}\n            {votesCount}\n          </>\n        ) : (\n          <>\n            <i className=\"fas fa-check-double\" style={{ color: \"#27ae60\" }}></i>{\" \"}\n            {votesCount}\n          </>\n        )}\n      </span>\n    )\n  );\n};\n\nconst Row = ({\n  index,\n  remove,\n  content,\n  id,\n  voteCount = 0,\n  isProposal = false,\n}) => {\n  const { instance, admin } = useContext(Web3Context);\n  const { status, vote } = useContract(instance, admin);\n  const hasVotes = useMemo(() => isProposal && voteCount > 0, [voteCount]);\n  return (\n    <tr>\n      <th scope=\"row\">{index + 1}</th>\n      <td width=\"60%\">{content}</td>\n      <td width=\"20%\">{hasVotes && <VotesCount votesCount={voteCount} />}</td>\n      <td width=\"20%\">\n        <div\n          className=\"d-flex\"\n          style={{\n            marginRight: !isProposal && 20,\n            marginLeft: !isProposal && \"-15px\",\n          }}\n        >\n          {isProposal && parseInt(status) === 3 && (\n            <button className=\"btn btn-info btn-sm\" onClick={() => vote(id)}>\n              vote\n            </button>\n          )}\n          &nbsp;\n          <button\n            className=\"btn btn-danger btn-sm\"\n            style={styles.button}\n            onClick={remove}\n          >\n            remove\n          </button>\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nexport default Row;\n","import React from \"react\";\nconst Spinner = ({ isLoading, children = \"Loading\" }) =>\n  isLoading && (\n    <div\n      style={{ width: \"100%\" }}\n      className=\"d-flex align-items-center flex-column mt-5\"\n    >\n      <p className=\"text-secondary\">{children}</p>\n      <div\n        style={{ opacity: \"0.7\" }}\n        className=\"spinner-border text-secondary\"\n        role=\"status\"\n      ></div>\n    </div>\n  );\nexport default Spinner;\n","import React, { useContext, useState, useEffect, useMemo } from \"react\";\nimport { Web3Context } from \"../context\";\nimport useContract from \"../context/useContract\";\nimport Table from \"./components/Table\";\nimport Row from \"./components/Row\";\nimport Spinner from \"./components/Spinner\";\n\nconst VotersList = ({ width = \"6\" }) => {\n  const [voters, setVoters] = useState([]);\n  const [voterAddress, setVoterAddress] = useState(null);\n  const { instance, admin } = useContext(Web3Context);\n  const {\n    transactionStatus,\n    TRANSACTION_STATUS,\n    eventTxHash,\n    status,\n    whiteList,\n    addVoter,\n    removeVoter,\n  } = useContract(instance, admin);\n\n  const handleOnChange = (e) => setVoterAddress(e.target.value);\n  const handleOnSubmit = (e) => {\n    e.preventDefault();\n    addVoter(voterAddress);\n    setVoterAddress(null);\n  };\n\n  useEffect(() => {\n    whiteList(instance).then(setVoters);\n  }, [instance]);\n  useEffect(() => {\n    whiteList(instance).then(setVoters);\n  }, [eventTxHash, voters]);\n\n  const isVoterRegistrationOpen = useMemo(\n    () => !Boolean(!!voterAddress && parseInt(status) === 0),\n    [voterAddress]\n  );\n  const isPending = useMemo(\n    () => {\n      if (transactionStatus.status === TRANSACTION_STATUS.PENDING && transactionStatus.event === \"VoterRegistered\") { return true}  \n      if (transactionStatus.status === TRANSACTION_STATUS.PENDING && transactionStatus.event === \"VoterRemoved\") { return true}  \n      return false;\n    },\n    [eventTxHash, transactionStatus]\n  );\n  const hasErrors = useMemo(() => !!voterAddress && parseInt(status) !== 0, [\n    voterAddress,\n  ]);\n  return (\n    <div className={`col-md-${width}`}>\n      <form\n        onSubmit={handleOnSubmit}\n        className=\"d-flex justify-content-between mt-5\"\n      >\n        <div className=\"col-sm-8\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"voterErrorText\"\n            value={voterAddress}\n            onChange={handleOnChange}\n          />\n          {hasErrors && (\n            <div\n              id=\"voterErrorText\"\n              className=\"form-text\"\n              style={{ color: \"crimson\", height: \"auto\" }}\n            >\n              Voters registration is closed now\n            </div>\n          )}\n        </div>\n        <button\n          type=\"submit\"\n          className=\"btn btn-secondary col-sm-3\"\n          disabled={isVoterRegistrationOpen}\n        >\n          Add Voter\n        </button>\n      </form>\n      <Spinner isLoading={isPending} />\n      <Table header=\"Voters\" isLoading={isPending}>\n        {!!voters &&\n          voters.map(({ address }, index) => {\n            return (\n              <Row\n                remove={() => removeVoter(address)}\n                content={address}\n                index={index}\n                key={address}\n              />\n            );\n          })}\n      </Table>\n    </div>\n  );\n};\nexport default VotersList;\n","import React, { useContext, useState, useEffect, useMemo } from \"react\";\nimport { Web3Context } from \"../context\";\nimport useContract from \"../context/useContract\";\nimport Table from \"./components/Table\";\nimport Row from \"./components/Row\";\nimport Spinner from \"./components/Spinner\";\n\nconst ProposalList = ({ width = \"6\" }) => {\n  const [proposal, setProposal] = useState(null);\n  const [proposalsList, setProposalList] = useState(null);\n  const { instance, admin } = useContext(Web3Context);\n  const {\n    status,\n    eventTxHash,\n    transactionStatus,\n    TRANSACTION_STATUS,\n    getProposals,\n    addProposal,\n    removeProposal,\n  } = useContract(instance, admin);\n\n  const handleOnChange = (e) => setProposal(e.target.value);\n\n  const handleOnSubmit = (e) => {\n    e.preventDefault();\n    addProposal(proposal);\n    setProposal(null);\n  };\n  useEffect(() => {\n    getProposals(instance).then(setProposalList);\n  }, [instance]);\n  useEffect(() => {\n    getProposals(instance).then(setProposalList);\n  }, [eventTxHash]);\n  const isProposalsRegistrationOpen = useMemo(\n    () => !Boolean(!!proposal && parseInt(status) === 1),\n    [proposal]\n  );\n  const isPending = useMemo(() => {\n    if (\n      transactionStatus.status === TRANSACTION_STATUS.PENDING &&\n      transactionStatus.event === \"ProposalRegistered\"\n    ) {\n      return true;\n    }\n    if (\n      transactionStatus.status === TRANSACTION_STATUS.PENDING &&\n      transactionStatus.event === \"ProposalRemoved\"\n    ) {\n      return true;\n    }\n    return false;\n  }, [eventTxHash, transactionStatus]);\n  const hasErrors = useMemo(() => !!proposal && parseInt(status) !== 1, [\n    proposal,\n  ]);\n  return (\n    <div className={`col-md-${width}`}>\n      <form\n        onSubmit={handleOnSubmit}\n        className=\"d-flex flex-row justify-content-between mt-5\"\n      >\n        <div className=\"col-sm-8\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"proposalErrorText\"\n            value={proposal}\n            onChange={handleOnChange}\n          />\n          {hasErrors && (\n            <div\n              id=\"proposalErrorText\"\n              className=\"form-text\"\n              style={{ color: \"crimson\", height: \"auto\" }}\n            >\n              Proposals' session currently closed\n            </div>\n          )}\n        </div>\n        <button\n          type=\"submit\"\n          className=\"btn btn-secondary col-sm-3\"\n          disabled={isProposalsRegistrationOpen}\n        >\n          Add Proposal\n        </button>\n      </form>\n      <Spinner isLoading={isPending} />\n      <Table header=\"Proposals\" isLoading={isPending}>\n        {!!proposalsList &&\n          proposalsList.map((proposal, index) => {\n            return (\n              <Row\n                {...proposal}\n                index={index}\n                isProposal={true}\n                content={proposal.description}\n                remove={() => removeProposal(proposal.id)}\n                key={proposal.id}\n              />\n            );\n          })}\n      </Table>\n    </div>\n  );\n};\nexport default ProposalList;\n","import React, { useEffect, useMemo, useContext, useState } from \"react\";\nimport withContext, { Web3Context } from \"./context\";\nimport useContract from \"./context/useContract\";\nimport Header from \"./ui/components/Header\";\nimport Footer from \"./ui/components/Footer\";\nimport Winner from \"./ui/components/Winner\";\nimport VotersList from \"./ui/VotersList\";\nimport ProposalList from \"./ui/ProposalList\";\nimport Spinner from \"./ui/components/Spinner\";\nimport \"./App.css\";\n\nconst Toast = () => {\n  const { instance, admin } = useContext(Web3Context);\n  const {\n    toast: { visible, message },\n  } = useContract(instance, admin);\n  const visibility = useMemo(() => (visible ? \"show\" : \"hide\"), [visible]);\n\n  return (\n    <div className=\"position-fixed bottom-5 end-0 p-3\" style={{ zIndex: 5 }}>\n      <div\n        id=\"liveToast\"\n        className={`toast ${visibility}`}\n        role=\"alert\"\n        aria-live=\"assertive\"\n        aria-atomic=\"true\"\n      >\n        <div className=\"toast-header d-flex justify-content-between\">\n          <small>just now</small>\n          <button\n            type=\"button\"\n            className=\"btn-close\"\n            data-bs-dismiss=\"toast\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div className=\"toast-body\">{message}</div>\n      </div>\n    </div>\n  );\n};\n\nfunction App({ connectWeb3, instance, admin, endVoting}) {\n  const { eventTxHash, transactionStatus, TRANSACTION_STATUS } = useContract(\n    instance,\n    admin,\n  );\n  \n\n  useEffect(() => {\n    connectWeb3();\n  }, [instance]);\n\n  const isPending = useMemo(() => {\n    return (\n      transactionStatus.status === TRANSACTION_STATUS.PENDING &&\n      transactionStatus.event === \"WorkflowStatusChange\"\n    );\n  }, [eventTxHash, transactionStatus]);\n  return (\n    <>\n      <Toast />\n      <Header />\n      <Spinner isLoading={isPending}>\n        Please wait while we are processing your transaction ...\n      </Spinner>\n      {endVoting ? <Winner/> : null}\n         <div className=\"container\">\n        <div className=\"row\">\n          <VotersList />\n          <ProposalList />\n        </div>\n      </div>       \n      <Footer />\n    </>\n  );\n}\nexport default withContext(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Web3Provider from './context/Web3Provider'\nimport App from './App';\n\n\nReactDOM.render(\n    <Web3Provider>\n        <App />\n    </Web3Provider>,\n     document.getElementById('root'));\n\n"],"sourceRoot":""}